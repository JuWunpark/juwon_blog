---
layout: post
read_time: true
show_date: true
title: "Jekyll ë¸”ë¡œê·¸ ìë™ë°°í¬ êµ¬ì¶•ê¸° (GitHub Actions + Nginx)"
date: 2025-11-11 23:59:00 +0900
description: EC2(Ubuntu)ì— Jekyll ë¸”ë¡œê·¸ë¥¼ ì˜¬ë¦¬ê³ , GitHub Actionsë¡œ main í‘¸ì‹œ ì‹œ ìë™ ë°°í¬ë˜ë„ë¡ ë§Œë“  ê³¼ì •ê³¼ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê¸°ë¡.
img: posts/20251107/jekyll.jpg
tags: [devops, jekyll, github-actions, nginx, rbenv]
author: Juwon
github: JuWunpark/juwon_blog
---

## ì™œ ìë™ë°°í¬ì¸ê°€?
ë¡œì»¬ì—ì„œ ê¸€ ì“°ê³  `git push`ë§Œ í•˜ë©´ ì„œë²„ê°€ ì•Œì•„ì„œ ìµœì‹  ìƒíƒœë¡œ ë°”ë€Œê¸¸ ì›í–ˆë‹¤.  
â€œìˆ˜ë™ ë¡œê·¸ì¸ â†’ ë¹Œë“œ â†’ ë³µì‚¬â€ë¥¼ ì—†ì•  ìƒì‚°ì„±ì„ ë†’ì´ëŠ” ê²Œ ëª©í‘œ.

---

## ì•„í‚¤í…ì²˜ í•œ ì¥ ìš”ì•½

ê°œë°œ â†’ git push (main)
â†“
GitHub Actions (SSH)
â†“
EC2: /home/ubuntu/myblog

  rbenv Ruby 3.3.4

  bundle install â†’ jekyll build

  _site/ â†’ rsync â†’ /var/www/myblog
  â†“
  Nginx(80/443) â†’ https://blog.juwonpark.me


---

## ì„œë²„ êµ¬ì„±
- **OS**: Ubuntu 24.04 LTS (EC2)
- **ì›¹ì„œë²„**: Nginx + Letâ€™s Encrypt(Cloudflare ì•ë‹¨)
- **Jekyll ë¹Œë“œ**: rbenv + Ruby 3.3.4 + bundler
- **ë¬¸ì„œ ë£¨íŠ¸**: `/var/www/myblog`
- **ì†ŒìŠ¤ ê²½ë¡œ**: `/home/ubuntu/myblog`

### rbenv & Jekyll
```bash
export RBENV_ROOT="$HOME/.rbenv"
export PATH="$RBENV_ROOT/bin:$PATH"
eval "$(rbenv init - bash)"

ruby -v || rbenv install -s 3.3.4
rbenv global 3.3.4
gem install bundler jekyll --no-document


GitHub Actions ì›Œí¬í”Œë¡œ

í•µì‹¬ì€ ì„œë²„ì— SSH ì ‘ì† â†’ ë¦¬í¬ ê°•ì œ ë™ê¸°í™” â†’ ë¹Œë“œ â†’ rsync ë°°í¬.

# .github/workflows/deploy.yml (ë°œì·Œ)
name: Deploy to Server
on:
  push: { branches: [ main ] }
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Setup SSH
        run: |
          set -e
          mkdir -p ~/.ssh
          echo "${{ secrets.SERVER_SSH_KEY }}" > ~/.ssh/deploy_key
          chmod 600 ~/.ssh/deploy_key
          PORT="${{ secrets.SERVER_PORT }}"; [ -z "$PORT" ] && PORT=22
          ssh-keyscan -p "$PORT" -H "${{ secrets.SERVER_HOST }}" >> ~/.ssh/known_hosts

      - name: Deploy to server
        run: |
          set -e
          PORT="${{ secrets.SERVER_PORT }}"; [ -z "$PORT" ] && PORT=22
          ssh -i ~/.ssh/deploy_key -p "$PORT" \
            -o StrictHostKeyChecking=yes \
            -o UserKnownHostsFile=~/.ssh/known_hosts \
            "${{ secrets.SERVER_USER }}@${{ secrets.SERVER_HOST }}" '
            set -euo pipefail
            echo "[deploy] start"

            export RBENV_ROOT="$HOME/.rbenv"
            export PATH="$RBENV_ROOT/bin:$PATH"
            eval "$(rbenv init - bash)"

            cd /home/ubuntu/myblog
            RUBY_VER="$(cat .ruby-version 2>/dev/null || echo 3.3.4)"
            rbenv shell "$RUBY_VER"
            gem install bundler --no-document || true

            echo "[deploy] sync to origin/main"
            git fetch origin
            git reset --hard origin/main
            git clean -fd

            echo "[deploy] bundle install"
            bundle install

            echo "[deploy] jekyll build"
            bundle exec jekyll build -s . -d _site

            echo "[deploy] rsync to web root"
            rsync -az --delete _site/ /var/www/myblog/

            echo "[deploy] done"
          '
í…Œë§ˆ/í˜ì´ì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•
ì‚¬ì´íŠ¸ íƒ€ì´í‹€
  title: "Juwon"
  description: "ì£¼ì›ì˜ ìœˆ95 í…Œë§ˆ ë¸”ë¡œê·¸"

About ë§í¬ì™€ í˜ì´ì§€
ìƒë‹¨ ë©”ë‰´ íŒŒì¼: _includes/topbar.html
  <a href="{{ '/me/' | relative_url }}"><li>About</li></a>

  ---
  layout: default
  title: About
  permalink: /me/
  ---
  ## ì•ˆë…•í•˜ì„¸ìš”, ì£¼ì›ì…ë‹ˆë‹¤ ğŸ‘‹
  - ê´€ì‹¬ì‚¬: AI ì•± ê°œë°œ(Django), DevOps, ìë™í™”
  - ê¹ƒí—ˆë¸Œ: [JuWunpark](https://github.com/JuWunpark)
  - ì´ë©”ì¼: <hello@juwonpark.me>

| ì¦ìƒ                                     | ì›ì¸                           | í•´ê²°                                                                 |
| -------------------------------------- | ---------------------------- | ------------------------------------------------------------------ |
| `bundle: command not found`            | ë¹„ëŒ€í™”ì‹ SSHì—ì„œ rbenv PATH ë¯¸ì„¤ì •    | ì›Œí¬í”Œë¡œ ì›ê²© ìŠ¤í¬ë¦½íŠ¸ì— `RBENV_ROOT/PATH` + `eval "$(rbenv init - bash)"` ì¶”ê°€ |
| `rbenv: version '3.3.5' not installed` | ì„œë²„ Rubyì™€ `.ruby-version` ë¶ˆì¼ì¹˜ | ë²„ì „ **3.3.4**ë¡œ í†µì¼ í›„ `rbenv shell 3.3.4`                             |
| `git pull` ì¶©ëŒ                          | ì„œë²„ì— ë¡œì»¬ ë³€ê²½ íŒŒì¼ ì¡´ì¬              | `git fetch && git reset --hard origin/main && git clean -fd`       |
| Actions `Bad port ''`                  | `SERVER_PORT` ëˆ„ë½             | ë¹„ì–´ìˆìœ¼ë©´ 22ë¡œ í´ë°±                                                       |
| About 404                              | ë©”ë‰´ëŠ” `/me`, ì‹¤ í˜ì´ì§€ ì—†ìŒ          | ë£¨íŠ¸ `me.md` ìƒì„± + ë©”ë‰´ ë§í¬ `/me/`ë¡œ ê³ ì •                                   |
| í•œê¸€ ê¹¨ì§                                  | meta/í—¤ë”ì— charset ì—†ìŒ          | `<meta charset="utf-8">` + `charset utf-8;`                        |


ë¡œì»¬ ì—†ì´ â€œë°”ë¡œ ê¸€ ì“°ê¸°â€ ë£¨í‹´
GitHubì—ì„œ ìƒˆ í¬ìŠ¤íŠ¸ íŒŒì¼ ë§Œë“¤ê¸°: _posts/2025-11-11-my-post.md
ë³¸ë¬¸ ì‘ì„± â†’ Commit to main
Actions íƒ­ì—ì„œ Deploy to Serverê°€ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸
ë¡œê·¸ì— ì•„ë˜ ìˆœì„œê°€ ë³´ì´ë©´ ì„±ê³µ:
  [deploy] sync to origin/main
  [deploy] bundle install
  [deploy] jekyll build
  [deploy] rsync to web root
  [deploy] done

ê²°ë¡ 
ì´ì œ ê¸€ë§Œ ì“°ê³  git push í•˜ë©´ ëª‡ì‹­ ì´ˆ ë‚´ë¡œ ë¸”ë¡œê·¸ê°€ ê°±ì‹ ëœë‹¤.
ë‚¨ì€ ë°˜ë³µì‘ì—…ì„ ê³„ì† ì—†ì• ì„œ, â€œë‚´ìš©ì—ë§Œ ì§‘ì¤‘í•˜ëŠ” ë¸”ë¡œê·¸â€ë¡œ ë§Œë“¤ê¸°!



